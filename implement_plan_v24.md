3. Endless Mode System
   3.1 Lore & Story Background
   The Endless Descent
   "Beyond the Iron Fortress lies the Abyss Gate - a tear in reality that leads to infinite darkness. Those who enter never return, but legends speak of treasures beyond imagination for those brave enough to descend..."

Story Context
After defeating the Warlord King at Floor 100:
"The fortress crumbles, revealing an ancient portal.
You feel an overwhelming pull toward the darkness beyond.
The souls of fallen warriors
whisper:
'The Endless awaits. Only the worthy may descend.'"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ THE ABYSS GATE HAS OPENED â”‚
â”‚ â”‚
â”‚ "Beyond lies infinite challenge. â”‚
â”‚ There is no return. No salvation. â”‚
â”‚ Only the climb." â”‚
â”‚ â”‚
â”‚ [ENTER THE ENDLESS] [CLAIM VICTORY]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Realm Lore in Endless
Floor Range Realm Lore
101-120 ðŸŒ² Corrupted Nature "The Den has grown wild, consuming all light."
121-140 ðŸŒ‘ Abyssal Shadow "The Guild has been swallowed by the void."
141-160 ðŸ”¥ Hellfire Citadel "The Castle burns with unholy flames."
161-180 â„ï¸ Frozen Pinnacle "The Tower is encased in eternal ice."
181-200 âš¡ Storm Fortress "The Fortress rages with elemental fury."
201+ ðŸŒ€ The Chaos Core "Reality itself unravels. All realms merge."
Endless Boss Lore
Boss Floor Lore
The Amalgam 125 "A twisted fusion of all realm guardians."
Time Warden 150 "A being that exists outside of time itself."
The Void 175 "Pure nothingness given form and hunger."
Primordial 200 "The first being. The source of all undeath."
3.2 Integration with Ascension, Realm & Biome
Ascension Integration
Ascension Level affects Endless Mode:
â”œâ”€ Difficulty Scaling: +20% enemy stats per ascension level
â”œâ”€ Soul Rewards: +10% souls per ascension level
â”œâ”€ Starting Floor: Can start from checkpoint (requires ascension 1+)
â”œâ”€ Meta Upgrades: All ascension upgrades apply
â””â”€ Score Multiplier: +10% score per ascension level
Realm Integration (Cycling)
Floor 101-120: ðŸŒ² Nature Realm (Thorns, Poison enemies)
Floor 121-140: ðŸŒ‘ Shadow Realm (Dodge-heavy, Stealth enemies)
Floor 141-160: ðŸ”¥ Fire Realm (High DMG, DOT enemies)
Floor 161-180: â„ï¸ Ice Realm (Slow, Freeze enemies)
Floor 181-200: âš¡ Storm Realm (Random elements)
Floor 201+: ðŸŒ€ Chaos Realm (All elements mixed)
Cycle repeats every 100 floors with +50% scaling
Biome Integration
Each Realm has 3-4 Biomes that rotate every 5 floors:
Nature Realm Biomes:
â”œâ”€ Forest: +10% EXP, normal enemies
â”œâ”€ Swamp: -10% speed, poison pools
â”œâ”€ Grove: +healing, nature spirits
â””â”€ Corrupted: +25% difficulty, corrupted enemies
Biome Modifiers stack with Endless scaling:
â”œâ”€ Movement speed affects flee chance
â”œâ”€ Environmental damage every X turns
â”œâ”€ Unique enemy types per biome
â””â”€ Special loot tables per biome
Boss Structure in Endless
Every 10 floors: Mini-Boss (scaled realm boss)
Every 25 floors: Mega-Boss (new endless-only bosses)
Every 50 floors: Realm Guardian (super boss + checkpoint)
Every 100 floors: Ascended Boss (requires specific strategy)
Endless-Only Bosses:
â”œâ”€ The Amalgam (Floor 125) - Combines all realm elements
â”œâ”€ Time Warden (Floor 150) - Rewinds player buffs
â”œâ”€ The Void (Floor 175) - Disables items temporarily
â”œâ”€ Primordial (Floor 200) - Final form, unlocks Chaos Realm
â””â”€ [Procedural Bosses] - Random combinations after floor 200
World Map Integration
NORMAL MODE (Floor 1-100):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ World Map: Choose Realm â†’ Node Map â”‚
â”‚ â”‚
â”‚ ðŸŒ³ Nature's Den (Floor 1-20) â”‚
â”‚ â””â”€ Node Map: 4 layers, 3-4 nodes each â”‚
â”‚ â””â”€ Nodes: Combat, Event, Merchant, Restâ”‚
â”‚ â””â”€ Boss at final node â”‚
â”‚ â”‚
â”‚ ðŸ—¡ï¸ Shadow Guild (Floor 21-40) â”‚
â”‚ ðŸ° Castle of Light (Floor 41-60) â”‚
â”‚ ðŸ”® Arcane Tower (Floor 61-80) â”‚
â”‚ ðŸ›¡ï¸ Iron Fortress (Floor 81-100) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ENDLESS MODE (Floor 101+):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ World Map: LOCKED (linear progression) â”‚
â”‚ â”‚
â”‚ Procedural Node Map Generation: â”‚
â”‚ â”œâ”€ New map every 20 floors (realm cycle) â”‚
â”‚ â”œâ”€ Increased Combat nodes (60% â†’ 80%) â”‚
â”‚ â”œâ”€ Decreased Rest nodes (limited healing) â”‚
â”‚ â”œâ”€ More Elite nodes appear â”‚
â”‚ â””â”€ Every 50 floors: Special Checkpoint Map â”‚
â”‚ â”‚
â”‚ Visual Changes: â”‚
â”‚ â”œâ”€ Map background changes per realm â”‚
â”‚ â”œâ”€ Node icons show scaling level â”‚
â”‚ â”œâ”€ Progress bar shows endless floor # â”‚
â”‚ â””â”€ Checkpoint nodes glow golden â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Endless Node Types
Node Type Frequency Description
âš”ï¸ Combat 60% Scaled enemies by floor
ðŸ’€ Elite 15% Mini-boss enemies, +50% rewards
ðŸŽ­ Event 10% Challenge events (from 1.2)
ðŸ›’ Merchant 8% Scaled shop prices
â›º Rest 5% Limited healing (50% max)
âœ¨ Checkpoint 2% Every 50 floors, full heal + save
Map Transition Flow
Floor 100 Boss Defeated
â†“
Victory Screen
"ENDLESS MODE UNLOCKED"
â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Continue to â”‚
â”‚ Endless Mode? â”‚
â”‚ [YES] [NO] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†“
(YES) Generate Endless Map
â†“
Floor 101: Nature Realm (Endless) - New procedural node map - Realm visual: Nature + Dark tint - Showing "Endless Floor 1 (101)"
2.2 Floor Progression Summary
Floor 1-100: Normal Progression (5 Realms)
â””â”€ World Map: Choose realm
â””â”€ Node Map: Navigate nodes
â””â”€ Floor 20: Realm 1 Boss (Nature)
â””â”€ Floor 40: Realm 2 Boss (Shadow)
â””â”€ Floor 60: Realm 3 Boss (Fire/Light)
â””â”€ Floor 80: Realm 4 Boss (Arcane)
â””â”€ Floor 100: Final Boss â†’ Endless Mode Option
Endless Mode (Floor 101+):
â””â”€ World Map: Locked (auto-progression)
â””â”€ Node Map: Procedural generation
â””â”€ Realm cycles (every 20 floors)
â””â”€ Biome rotation (every 5 floors)
â””â”€ Score tracking for leaderboards
â””â”€ Checkpoints every 50 floors
2.2 Scaling Formula
// Enemy scaling for Endless Mode
const endlessFloor = currentFloor - 100;
const scalingFactor = 1 + endlessFloor _ 0.05; // +5% per floor
const ascensionBonus = 1 + ascensionLevel _ 0.2; // +20% per ascension
enemyStats.hp _= scalingFactor _ ascensionBonus;
enemyStats.atk _= scalingFactor _ ascensionBonus;
enemyStats.exp _= 1 + endlessFloor _ 0.02; // +2% exp per floor
enemyStats.gold _= 1 + endlessFloor _ 0.03; // +3% gold per floor
2.3 Endless Mode Features
Realm Cycling: Floor 101-120 = Nature, 121-140 = Shadow, etc.
Mini-Bosses: Every 10 floors
Mega-Bosses: Every 25 floors (new boss types)
Checkpoints: Every 50 floors (can resume from here)
Score System: Distance Ã— Kills Ã— Modifier bonus
2.4 Files to Modify/Create
[NEW] src/game/managers/EndlessMode.js
export const EndlessMode = {
isActive: false,
startFloor: 100,
checkpoints: [],
score: 0,
getScalingFactor(floor) { ... },
cycleRealm(floor) { ... },
getEndlessBoss(floor) { ... },
calculateScore() { ... }
};

[MODIFY]
src/game/core/game.js
Add endless mode trigger at floor 100
Add checkpoint system
Integrate realm cycling
[MODIFY]
src/game/managers/loot.js
Improved loot tables for endless mode 3. Leaderboard System
3.1 Score Calculation
score = baseScore _ modifierMultiplier _ ascensionMultiplier
baseScore = (floor _ 100) + (kills _ 10) + (bossKills _ 500) + (goldEarned / 10)
modifierMultiplier = product of all active modifier multipliers
ascensionMultiplier = 1 + (ascensionLevel _ 0.1)
3.2 Local Leaderboard (v38.4)
// Stored in localStorage
leaderboard: [
{
name: "Player1",
score: 125000,
floor: 150,
class: "Death Knight",
modifiers: ["no_healing", "glass_cannon"],
ascensionLevel: 5,
date: "2025-12-25",
},
];
3.3 Files to Create
[NEW] src/game/managers/Leaderboard.js
Save/load from localStorage
Sort and display top 10
Filter by mode (Normal, Endless, Daily)
[NEW]
src/components/LeaderboardPanel.vue
Display rankings
Player entry submission 4. Implementation Order
Phase 1: Run Modifiers (Quick Win)
Create modifiers.js config
Add runModifiers to store
Create RunSetupPanel.vue
Apply modifier effects in
Player.js
Block healing logic
Phase 2: Challenge Events
Add event definitions to modifiers.js
Create event trigger in exploration
Add event UI/rewards
Phase 3: Endless Mode
Create EndlessMode.js manager
Add floor 100 trigger
Implement scaling formula
Add realm cycling
Add checkpoint system
Phase 4: Leaderboards
Create Leaderboard.js manager
Create
LeaderboardPanel.vue
Add score calculation
Save on death/complete 5. Verification Plan
Automated Tests
npm run build # Must pass
npm run dev # Visual testing
Manual Testing
Start new game â†’ Select modifiers â†’ Verify effects active
Play through floors 1-100 â†’ Trigger endless mode
Verify enemy scaling in endless mode
Die â†’ Verify leaderboard entry saved
Check leaderboard displays correctly

Edge Cases
Run Modifiers Edge Cases
Case Expected Behavior
Select multiple conflicting modifiers Show warning, allow anyway
Glass Cannon + No Healing Both apply, very hard
Modifier during boss fight Effects persist
Save/load with modifiers Modifiers persist
Modifier disabled mid-run Not allowed (locked)
Hardcore + resurrection item Resurrection disabled
Endless Mode Edge Cases
Case Expected Behavior
Player reaches floor 100 but doesn't want endless Allow return to title with souls
Player dies at floor 150 Save to leaderboard, offer checkpoint resume
Checkpoint resume after game update Handle version mismatch gracefully
Realm cycle at floor 200+ Chaos realm with mixed elements
Enemy HP overflow (very high floors) Cap at MAX_SAFE_INTEGER
Loot table at floor 500+ All items legendary+, high scaling
Player disconnect mid-endless Auto-save every 5 floors
Ascension + Endless Edge Cases
Case Expected Behavior
Ascension 10 + Endless floor 200 Extreme scaling, special rewards
Prestige during endless run Keep endless progress as separate save
Meta upgrades affect endless All upgrades apply with multipliers
Soul rewards at high floors Capped growth to prevent inflation
New ascension unlock during endless Show notification, apply after death
Challenge Event Edge Cases
Case Expected Behavior
Event during No Healing modifier Healing rewards converted to gold
Gambling Den with 0 gold Cannot participate, skip
Boss Rematch without previous boss Skip to next available
Multiple events same floor Queue system, one at a time
Event interrupts save Event state saved
Gauntlet with 1 HP Allow, high risk
Devil's Deal at 1 HP Block, would kill player
Leaderboard Edge Cases
Case Expected Behavior
Score overflow Cap at MAX_SAFE_INTEGER
Duplicate names Allow, show date/time
localStorage full Purge oldest entries
Import save with leaderboard Merge leaderboards
Cheated score detection Hash verification (basic)
Name contains special chars Sanitize input
Save System Edge Cases (Endless)
Case Expected Behavior
Player tries pause menu save in endless Show alert: "Save disabled. Find Sanctuary!"
Player tries export save in endless Block with warning: "Cannot export during Endless run"
Sanctuary node appears Allow full save + heal
Browser crash during endless Auto-save at floor transitions only
Import save with active endless run Warn: "This will overwrite endless progress"
Player at checkpoint tries to quit Confirm: "Progress saved at checkpoint. Continue later?"
Daily Challenge Edge Cases
Case Expected Behavior
Player already completed daily Show score, block retry
Daily resets mid-run Allow completion, score counts for previous day
Player opens daily at 23:59 Lock in that day's seed until completion
No internet for daily seed Use cached seed or fallback
Daily + Endless conflict Daily is separate mode, no endless access
UI/UX Edge Cases
Case Expected Behavior
Modifier panel opened mid-combat Block, show "Complete current battle first"
Challenge event during boss fight Queue for after boss
Multiple UI panels open Stack limit, auto-close oldest
Mobile touch during animation Debounce inputs
Endless floor number > 999 Compact display (e.g., "1.2K")
Performance Edge Cases
Case Expected Behavior
1000+ items in inventory Pagination, lazy loading
500+ floor endless run Clear old combat logs
Memory leak from VFX Auto-cleanup stale effects
Long session (4+ hours) Periodic garbage collection
